{% load static %}

<div class="border p-3 mb-3">
    <h3>Criar Proposta</h3>
    <div class="input-group mb-3">
        <input type="text" id="proposeHash" placeholder="Hash da Proposta" class="form-control">
    </div>
    <div class="input-group mb-3">
        <input type="text" id="hash_proposta" name="hash_proposta" placeholder="Hash da Proposta" class="form-control mb-3">
    </div>
    <div class="input-group mb-3">
        <input type="number" id="amount" name="amount" placeholder="Quantidade de pessoal (inteiros)" class="form-control mb-3">
    </div>
    <div class="input-group mb-3">
        <input type="text" id="wallet" name="wallet" placeholder="Carteira para receber pessoal" class="form-control mb-3">
    </div>
    <div class="input-group mb-3">
        <input type="number" id="price" name="price" placeholder="Preço (Tokens por 1 POL)" class="form-control mb-3">
    </div>
    <div class="input-group mb-3">
        <input type="number" id="quantidade_tokens" name="quantidade_tokens" placeholder="Quantidade de Tokens (inteiros)" class="form-control mb-3">
    </div>
    <div class="input-group mb-3">
        <input type="text" id="carteira_recebimento" name="carteira_recebimento" placeholder="Carteira de Recebimento" class="form-control mb-3">
    </div>
    <div class="input-group mb-3">
        <input type="number" id="preco" name="preco" placeholder="Preço (Tokens por 1 POL)" class="form-control mb-3">
    </div>
    <input type="button" value="Criar Proposta" class="btn btn-primary" onclick="makePropose();">
</div>

{% block script %}
<script>
    async function makePropose() {
        const proposeHash = document.getElementById("proposeHash").value.trim();
        const amount = document.getElementById("amount").value.trim();
        const wallet = document.getElementById("wallet").value.trim();
        const price = document.getElementById("price").value.trim();
        try {
        const txHash = await writeWeb3Contract(propostaContractAddress, "makePropose", propostaABI, [amount, wallet, proposeHash, price]);
        alert("Proposta criada! Tx: " + txHash);
        } catch (error) {
        console.error("Erro em makePropose:", error);
        alert("Erro ao criar proposta.");
        }
    }

</script>
{% endblock %}
