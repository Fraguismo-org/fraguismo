<!DOCTYPE html>
<html lang="pt-BR">

<head>
    {% load static %}
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FraguismoDAO - Interface de Contratos - Polygon</title>    
    <link rel="stylesheet" href="{% static 'css/fraguismo_dao.css' %}">
</head>

<body>
    <div class="container">
        <div class="nav-top">
            <a href="{% url 'index' %}" class="btn-return">
                <span>‚Üê</span> Retornar ao Fraguismo
            </a>
        </div>
        <div class="header">
            <h1>üèõÔ∏è FraguismoDAO v1.2.3</h1>
            <div class="wallet-info" style="display:none;">
                <button id="connectWallet" class="btn">Conectar MetaMask</button>
                <div id="walletAddress" class="wallet-address" style="display: none;"></div>
            </div>

            <div id="content"></div>
            <div id="connect-div">
                <nav class="navbar" style="margin-bottom: 20px;">
                    <div class="container">
                        <div id="connect-pane" style="margin-bottom: 10px;">
                            <button class="btn" id="connect">üîó Conectar Carteira</button>
                        </div>
                        <div id="disconnect-pane" style="margin-bottom: 10px;">
                            <button class="btn" id="disconnect"></button>
                        </div>
                    </div>
                </nav>
            </div>

        </div>

        <div class="contracts-grid">
            <div class="contract-card" onclick="openModal('propostasModal')">
                <div class="icon">üìã</div>
                <h2>Propostas & Guardi√µes</h2>
                <p>Contrato Unificado</p>
                <button class="btn btn-small">Abrir Interface</button>
            </div>

            <div class="contract-card" onclick="openModal('mercadoModal')">
                <div class="icon">üõí</div>
                <h2>Mercado</h2>
                <p>0x3633531C8b8D8ec551D3ee29125D05C3edb48FE3</p>
                <button class="btn btn-small">Abrir Interface</button>
            </div>

            <div class="contract-card" onclick="openModal('gracaModal')">
                <div class="icon">üí∞</div>
                <h2>Gra√ßa</h2>
                <p>0x7E598c2EB44c58A7F69fcC3957c4f27B6cb459D5</p>
                <button class="btn btn-small">Abrir Interface</button>
            </div>
        </div>
    </div>

    <!-- Modal Propostas -->
    <div id="propostasModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>üìã Contrato Propostas & Guardi√µes (Unificado)</h2>
                <span class="close" onclick="closeModal('propostasModal')">&times;</span>
            </div>
            <div class="modal-body">
                <div class="tabs">
                    <button class="tab active" onclick="switchTab('propostas', 'read')">üîç Leitura</button>
                    <button class="tab" onclick="switchTab('propostas', 'write')">‚úèÔ∏è Formul√°rios</button>
                    <button class="tab" onclick="switchTab('propostas', 'actions')">‚ö° A√ß√µes R√°pidas</button>
                    <button class="tab" onclick="switchTab('propostas', 'guardioes')">üë• Guardi√µes</button>
                </div>

                <!-- Tab de Leitura -->
                <div id="propostas-read" class="tab-content active">
                    <div class="function-section">
                        <h3>Fun√ß√µes de Consulta</h3>

                        <div class="function-item">
                            <h4>Owner do Contrato</h4>
                            <button class="btn btn-small" onclick="propostas.getOwner()">Consultar</button>
                            <div id="result-propostas-owner" class="result-box"></div>
                        </div>

                        <div class="function-item">
                            <h4>Status da Vota√ß√£o</h4>
                            <button class="btn btn-small" onclick="propostas.getVotingStatus()">Consultar</button>
                            <div id="result-propostas-status" class="result-box"></div>
                        </div>

                        <div class="function-item">
                            <h4>Blocos at√© Fim da Vota√ß√£o</h4>
                            <button class="btn btn-small"
                                onclick="propostas.getBlocksUntilVotingEnds()">Consultar</button>
                            <div id="result-propostas-blocksEnd" class="result-box"></div>
                        </div>

                        <div class="function-item">
                            <h4>Blocos at√© Pr√≥xima Vota√ß√£o</h4>
                            <button class="btn btn-small"
                                onclick="propostas.getBlocksUntilNextVoting()">Consultar</button>
                            <div id="result-propostas-blocksNext" class="result-box"></div>
                        </div>

                        <div class="function-item">
                            <h4>Propostas em Aberto</h4>
                            <button class="btn btn-small" onclick="propostas.getOpenProposals()">Consultar</button>
                            <div id="result-propostas-open" class="result-box"></div>
                        </div>

                        <div class="function-item">
                            <h4>Detalhes de Proposta</h4>
                            <div class="input-group">
                                <label>Hash da Proposta:</label>
                                <input type="text" id="propostas-details-hash" placeholder="Hash SHA256...">
                            </div>
                            <button class="btn btn-small" onclick="propostas.getProposalDetails()">Consultar</button>
                            <div id="result-propostas-details" class="result-box"></div>
                        </div>

                        <div class="function-item">
                            <h4>Votantes "Sim" de Proposta</h4>
                            <div class="input-group">
                                <label>Hash da Proposta:</label>
                                <input type="text" id="propostas-yesVoters-hash" placeholder="Hash SHA256...">
                            </div>
                            <button class="btn btn-small" onclick="propostas.getProposalYesVoters()">Consultar</button>
                            <div id="result-propostas-yesVoters" class="result-box"></div>
                        </div>
                    </div>
                </div>

                <!-- Tab de Formul√°rios -->
                <div id="propostas-write" class="tab-content">
                    <div class="function-section">
                        <h3>üìù Gest√£o de Propostas</h3>

                        <div class="function-item">
                            <h4>Criar Proposta</h4>
                            <div class="input-group">
                                <label>Quantidade de Tokens:</label>
                                <input type="number" id="propostas-make-amount" placeholder="Quantidade (sem decimais)">
                            </div>
                            <div class="input-group">
                                <label>Carteira de Recebimento:</label>
                                <input type="text" id="propostas-make-wallet" placeholder="0x...">
                            </div>
                            <div class="input-group">
                                <label>Hash da Proposta (SHA256):</label>
                                <input type="text" id="propostas-make-hash" placeholder="Hash SHA256...">
                            </div>
                            <div class="input-group">
                                <label>Pre√ßo (tokens por 1 POL):</label>
                                <input type="number" id="propostas-make-price" placeholder="Pre√ßo">
                            </div>
                            <button class="btn btn-small" onclick="propostas.makePropose()">Criar</button>
                            <div id="result-propostas-make" class="result-box"></div>
                        </div>

                        <div class="function-item">
                            <h4>Votar em Proposta</h4>
                            <div class="input-group">
                                <label>Hash da Proposta:</label>
                                <input type="text" id="propostas-vote-hash" placeholder="Hash SHA256...">
                            </div>
                            <div class="input-group">
                                <label>Decis√£o:</label>
                                <select id="propostas-vote-decision">
                                    <option value="true">‚úÖ Sim</option>
                                    <option value="false">‚ùå N√£o</option>
                                </select>
                            </div>
                            <button class="btn btn-small" onclick="propostas.doVote()">Votar</button>
                            <div id="result-propostas-vote" class="result-box"></div>
                        </div>

                        <div class="function-item">
                            <h4>Encerrar Vota√ß√£o de Proposta</h4>
                            <div class="input-group">
                                <label>Hash da Proposta:</label>
                                <input type="text" id="propostas-end-hash" placeholder="Hash SHA256...">
                            </div>
                            <button class="btn btn-small" onclick="propostas.endVote()">Encerrar</button>
                            <div id="result-propostas-end" class="result-box"></div>
                        </div>
                    </div>

                    <div class="function-section">
                        <h3>üí∞ Transa√ß√µes</h3>

                        <div class="function-item">
                            <h4>Comprar Tokens</h4>
                            <div class="input-group">
                                <label>Hash da Proposta:</label>
                                <input type="text" id="propostas-buy-hash" placeholder="Hash SHA256...">
                            </div>
                            <div class="input-group">
                                <label>Endere√ßo para Receber:</label>
                                <input type="text" id="propostas-buy-to" placeholder="0x...">
                            </div>
                            <div class="input-group">
                                <label>Valor em POL:</label>
                                <input type="text" id="propostas-buy-value" placeholder="0.01">
                            </div>
                            <button class="btn btn-small" onclick="propostas.buyTokens()">Comprar</button>
                            <div id="result-propostas-buy" class="result-box"></div>
                        </div>

                        <div class="function-item">
                            <h4>Sacar POL (Propositor)</h4>
                            <div class="input-group">
                                <label>Hash da Proposta:</label>
                                <input type="text" id="propostas-withdraw-hash" placeholder="Hash SHA256...">
                            </div>
                            <button class="btn btn-small" onclick="propostas.withdraw()">Sacar</button>
                            <div id="result-propostas-withdraw" class="result-box"></div>
                        </div>
                    </div>

                    <div class="function-section">
                        <h3>üëë Administra√ß√£o</h3>

                        <div class="function-item">
                            <h4>Transferir Ownership</h4>
                            <p style="color: #666; font-size: 0.9em; margin-bottom: 10px;">
                                Transfere o ownership do contrato para um novo endere√ßo. Apenas o owner atual pode
                                executar.
                            </p>
                            <div class="input-group">
                                <label>Novo Owner:</label>
                                <input type="text" id="propostas-transfer-owner" placeholder="0x...">
                            </div>
                            <button class="btn btn-small" onclick="propostas.transferOwnership()">Transferir</button>
                            <div id="result-propostas-transfer-owner" class="result-box"></div>
                        </div>
                    </div>
                </div>

                <!-- Tab de A√ß√µes R√°pidas -->
                <div id="propostas-actions" class="tab-content">
                    <div class="function-section">
                        <h3>‚ö° A√ß√µes R√°pidas</h3>
                        <p style="color: #666; margin-bottom: 20px;">
                            Estas a√ß√µes s√£o executadas com um √∫nico clique, sem necessidade de preencher formul√°rios.
                        </p>

                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px; margin-bottom: 30px;">
                            
                            <div class="quick-action-card">
                                <h4>üîì Abrir Vota√ß√£o</h4>
                                <p>Guardi√µes podem abrir ap√≥s tempo semanal</p>
                                <button class="btn btn-small" onclick="propostas.abrirVotacaoguardiao()">Abrir</button>
                                <div id="result-propostas-abrir-guardiao" class="result-box"></div>
                            </div>

                            <div class="quick-action-card">
                                <h4>‚úã Registrar Presen√ßa</h4>
                                <p>Confirme sua participa√ß√£o na vota√ß√£o</p>
                                <button class="btn btn-small" onclick="propostas.registerPresence()">Registrar</button>
                                <div id="result-propostas-presence" class="result-box"></div>
                            </div>

                            <div class="quick-action-card">
                                <h4>üîí Fechar Vota√ß√£o</h4>
                                <p>Encerra o per√≠odo de vota√ß√£o atual</p>
                                <button class="btn btn-small" onclick="propostas.fecharVotacao()">Fechar</button>
                                <div id="result-propostas-fechar" class="result-box"></div>
                            </div>

                            <div class="quick-action-card">
                                <h4>üßπ Limpar Presen√ßa</h4>
                                <p>Remove registros de presen√ßa</p>
                                <button class="btn btn-small" onclick="propostas.clearPresence()">Limpar</button>
                                <div id="result-propostas-clearPresence" class="result-box"></div>
                            </div>

                            <div class="quick-action-card">
                                <h4>‚öñÔ∏è Calcular Pesos</h4>
                                <p>Calcula pesos de vota√ß√£o dos guardi√µes</p>
                                <button class="btn btn-small" onclick="propostas.calcularPesos()">Calcular</button>
                                <div id="result-propostas-calcularPesos" class="result-box"></div>
                            </div>

                        </div>
                    </div>
                </div>

                <!-- Tab de Guardi√µes -->
                <div id="propostas-guardioes" class="tab-content">
                    <div class="tabs" style="border-bottom: 1px solid #ddd; margin-bottom: 20px;">
                        <button class="tab active" onclick="switchGuardiaoTab('consultas')" style="font-size: 14px;">üîç Consultas</button>
                        <button class="tab" onclick="switchGuardiaoTab('formularios')" style="font-size: 14px;">‚úèÔ∏è Formul√°rios</button>
                        <button class="tab" onclick="switchGuardiaoTab('acoes')" style="font-size: 14px;">‚ö° A√ß√µes</button>
                    </div>

                    <!-- Sub-tab Consultas -->
                    <div id="guardioes-consultas" class="guardiao-subtab active">
                        <div class="function-section">
                            <h3>üìä Listas de Guardi√µes</h3>

                            <div class="function-item">
                                <h4>Ver Todos os Guardi√µes</h4>
                                <button class="btn btn-small" onclick="propostas.getguardioes()">Consultar</button>
                                <div id="result-propostas-getguardioes" class="result-box"></div>
                            </div>

                            <div class="function-item">
                                <h4>Total de Guardi√µes</h4>
                                <button class="btn btn-small" onclick="propostas.totalguardioes()">Consultar</button>
                                <div id="result-propostas-totalguardioes" class="result-box"></div>
                            </div>

                            <div class="function-item">
                                <h4>Guardi√µes Ativos</h4>
                                <button class="btn btn-small" onclick="propostas.getguardioesAtivos()">Consultar</button>
                                <div id="result-propostas-guardioes-ativos" class="result-box"></div>
                            </div>

                            <div class="function-item">
                                <h4>Guardi√µes Suspensos</h4>
                                <button class="btn btn-small" onclick="propostas.getguardioesSuspensos()">Consultar</button>
                                <div id="result-propostas-guardioes-suspensos" class="result-box"></div>
                            </div>

                            <div class="function-item">
                                <h4>Informa√ß√µes de Quorum</h4>
                                <button class="btn btn-small" onclick="propostas.getQuorumInfo()">Consultar</button>
                                <div id="result-propostas-quorum-info" class="result-box"></div>
                            </div>
                        </div>

                        <div class="function-section">
                            <h3>üîç Consultas Espec√≠ficas</h3>

                            <div class="function-item">
                                <h4>Verificar se √© Guardi√£o</h4>
                                <div class="input-group">
                                    <label>Endere√ßo:</label>
                                    <input type="text" id="propostas-isguardiao-address" placeholder="0x...">
                                </div>
                                <button class="btn btn-small" onclick="propostas.isguardiao()">Verificar</button>
                                <div id="result-propostas-isguardiao" class="result-box"></div>
                            </div>

                            <div class="function-item">
                                <h4>Informa√ß√µes de um Guardi√£o</h4>
                                <div class="input-group">
                                    <label>Endere√ßo do Guardi√£o:</label>
                                    <input type="text" id="propostas-guardiao-info-address" placeholder="0x...">
                                </div>
                                <button class="btn btn-small" onclick="propostas.getguardiaoInfo()">Consultar</button>
                                <div id="result-propostas-guardiao-info" class="result-box"></div>
                            </div>

                            <div class="function-item">
                                <h4>Detalhes de Proposta de Guardi√£o</h4>
                                <div class="input-group">
                                    <label>Endere√ßo do Candidato:</label>
                                    <input type="text" id="propostas-guardiao-details-candidato" placeholder="0x...">
                                </div>
                                <button class="btn btn-small"
                                    onclick="propostas.getguardiaoProposalDetails()">Consultar</button>
                                <div id="result-propostas-guardiao-details" class="result-box"></div>
                            </div>
                        </div>
                    </div>

                    <!-- Sub-tab Formul√°rios -->
                    <div id="guardioes-formularios" class="guardiao-subtab">
                        <div class="function-section">
                            <h3>‚ûï Gest√£o de Guardi√µes</h3>

                            <div class="function-item">
                                <h4>Adicionar Guardi√£o Inicial (Owner)</h4>
                                <p style="color: #666; font-size: 0.9em; margin-bottom: 10px;">
                                    Permite adicionar at√© 9 guardi√µes iniciais (incluindo o pr√≥prio owner). Apenas o owner
                                    pode executar.
                                </p>
                                <div class="input-group">
                                    <label>Endere√ßo do Guardi√£o:</label>
                                    <input type="text" id="propostas-addguardiao-address" placeholder="0x...">
                                </div>
                                <button class="btn btn-small"
                                    onclick="propostas.adicionarguardiaoInicial()">Adicionar</button>
                                <div id="result-propostas-addguardiao" class="result-box"></div>
                            </div>

                            <div class="function-item">
                                <h4>Propor Novo Guardi√£o</h4>
                                <div class="input-group">
                                    <label>Endere√ßo do Candidato:</label>
                                    <input type="text" id="propostas-propor-candidato" placeholder="0x...">
                                </div>
                                <button class="btn btn-small" onclick="propostas.proporNovoguardiao()">Propor</button>
                                <div id="result-propostas-propor" class="result-box"></div>
                            </div>

                            <div class="function-item">
                                <h4>Votar em Candidato a Guardi√£o</h4>
                                <div class="input-group">
                                    <label>Endere√ßo do Candidato:</label>
                                    <input type="text" id="propostas-votar-guardiao-candidato" placeholder="0x...">
                                </div>
                                <div class="input-group">
                                    <label>Decis√£o:</label>
                                    <select id="propostas-votar-guardiao-decisao">
                                        <option value="true">‚úÖ Sim</option>
                                        <option value="false">‚ùå N√£o</option>
                                    </select>
                                </div>
                                <button class="btn btn-small" onclick="propostas.votarNovoguardiao()">Votar</button>
                                <div id="result-propostas-votar-guardiao" class="result-box"></div>
                            </div>

                            <div class="function-item">
                                <h4>Encerrar Proposta de Guardi√£o</h4>
                                <div class="input-group">
                                    <label>Endere√ßo do Candidato:</label>
                                    <input type="text" id="propostas-encerrar-guardiao-candidato" placeholder="0x...">
                                </div>
                                <button class="btn btn-small"
                                    onclick="propostas.encerrarPropostaguardiao()">Encerrar</button>
                                <div id="result-propostas-encerrar-guardiao" class="result-box"></div>
                            </div>
                        </div>
                    </div>

                    <!-- Sub-tab A√ß√µes R√°pidas -->
                    <div id="guardioes-acoes" class="guardiao-subtab">
                        <div class="function-section">
                            <h3>‚ö° A√ß√µes de Penalidade</h3>
                            <p style="color: #666; margin-bottom: 20px;">
                                Estas a√ß√µes gerenciam guardi√µes inativos e podem ser executadas por qualquer guardi√£o.
                            </p>

                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 15px;">
                                <div class="quick-action-card">
                                    <h4>‚ö†Ô∏è Suspender Inativos</h4>
                                    <p>Suspende guardi√µes com penalidade ‚â• 2</p>
                                    <button class="btn btn-small" onclick="propostas.suspenderInativos()">Suspender</button>
                                    <div id="result-propostas-suspender" class="result-box"></div>
                                </div>

                                <div class="quick-action-card">
                                    <h4>‚ùå Remover Inativos</h4>
                                    <p>Remove guardi√µes com penalidade ‚â• 4</p>
                                    <button class="btn btn-small" onclick="propostas.removerInativos()">Remover</button>
                                    <div id="result-propostas-remover" class="result-box"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Mercado -->
    <div id="mercadoModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>üõí Contrato Mercado</h2>
                <span class="close" onclick="closeModal('mercadoModal')">&times;</span>
            </div>
            <div class="modal-body">
                <div class="tabs">
                    <button class="tab active" onclick="switchTab('mercado', 'read')">üîç Leitura</button>
                    <button class="tab" onclick="switchTab('mercado', 'write')">‚úèÔ∏è Escrita</button>
                </div>

                <!-- Tab de Leitura -->
                <div id="mercado-read" class="tab-content active">
                    <div class="function-section">
                        <h3>Fun√ß√µes de Consulta</h3>

                        <div class="function-item">
                            <h4>Total de Ordens</h4>
                            <button class="btn btn-small" onclick="mercado.getOrdemCount()">Consultar</button>
                            <div id="result-mercado-count" class="result-box"></div>
                        </div>

                        <div class="function-item">
                            <h4>Detalhes de Ordem</h4>
                            <div class="input-group">
                                <label>ID da Ordem:</label>
                                <input type="number" id="mercado-ordem-id" placeholder="0">
                            </div>
                            <button class="btn btn-small" onclick="mercado.getOrdem()">Consultar</button>
                            <div id="result-mercado-ordem" class="result-box"></div>
                        </div>

                        <div class="function-item">
                            <h4>Todas as Ordens</h4>
                            <button class="btn btn-small" onclick="mercado.getTodasOrdens()">Consultar</button>
                            <div id="result-mercado-todas" class="result-box"></div>
                        </div>

                        <div class="function-item">
                            <h4>Ordens de um Vendedor</h4>
                            <div class="input-group">
                                <label>Endere√ßo do Vendedor:</label>
                                <input type="text" id="mercado-vendedor-address" placeholder="0x...">
                            </div>
                            <button class="btn btn-small" onclick="mercado.getOrdensDoVendedor()">Consultar</button>
                            <div id="result-mercado-vendedor" class="result-box"></div>
                        </div>

                        <div class="function-item">
                            <h4>√Årbitro Atual</h4>
                            <button class="btn btn-small" onclick="mercado.getArbitro()">Consultar</button>
                            <div id="result-mercado-arbitro" class="result-box"></div>
                        </div>
                    </div>
                </div>

                <!-- Tab de Escrita -->
                <div id="mercado-write" class="tab-content">
                    <div class="function-section">
                        <h3>Fun√ß√µes de Escrita</h3>

                        <div class="function-item">
                            <h4>Criar Ordem de Venda</h4>
                            <div class="input-group">
                                <label>Quantidade de Tokens (com decimais):</label>
                                <input type="text" id="mercado-criar-quantidade" placeholder="1000000000000000000">
                            </div>
                            <div class="input-group">
                                <label>Valor em BRL:</label>
                                <input type="number" id="mercado-criar-valor" placeholder="100">
                            </div>
                            <button class="btn btn-small" onclick="mercado.criarOrdem()">Criar Ordem</button>
                            <div id="result-mercado-criar" class="result-box"></div>
                        </div>

                        <div class="function-item">
                            <h4>Iniciar Negocia√ß√£o</h4>
                            <div class="input-group">
                                <label>ID da Ordem:</label>
                                <input type="number" id="mercado-negociar-id" placeholder="0">
                            </div>
                            <div class="input-group">
                                <label>Garantia em POL:</label>
                                <input type="text" id="mercado-negociar-garantia" placeholder="0.01">
                            </div>
                            <button class="btn btn-small" onclick="mercado.iniciarNegociacao()">Iniciar</button>
                            <div id="result-mercado-negociar" class="result-box"></div>
                        </div>

                        <div class="function-item">
                            <h4>Marcar como Completa (Vendedor)</h4>
                            <div class="input-group">
                                <label>ID da Ordem:</label>
                                <input type="number" id="mercado-completa-id" placeholder="0">
                            </div>
                            <button class="btn btn-small" onclick="mercado.marcarComoCompleta()">Completar</button>
                            <div id="result-mercado-completa" class="result-box"></div>
                        </div>

                        <div class="function-item">
                            <h4>Abrir Disputa (Vendedor)</h4>
                            <div class="input-group">
                                <label>ID da Ordem:</label>
                                <input type="number" id="mercado-disputa-id" placeholder="0">
                            </div>
                            <button class="btn btn-small" onclick="mercado.abrirDisputa()">Disputar</button>
                            <div id="result-mercado-disputa" class="result-box"></div>
                        </div>

                        <div class="function-item">
                            <h4>√Årbitro Confirma Pagamento</h4>
                            <div class="input-group">
                                <label>ID da Ordem:</label>
                                <input type="number" id="mercado-arbitro-confirma-id" placeholder="0">
                            </div>
                            <button class="btn btn-small"
                                onclick="mercado.arbitroConfirmaPagamento()">Confirmar</button>
                            <div id="result-mercado-arbitro-confirma" class="result-box"></div>
                        </div>

                        <div class="function-item">
                            <h4>√Årbitro Reverte Transa√ß√£o</h4>
                            <div class="input-group">
                                <label>ID da Ordem:</label>
                                <input type="number" id="mercado-arbitro-reverte-id" placeholder="0">
                            </div>
                            <button class="btn btn-small" onclick="mercado.arbitroReverteTransacao()">Reverter</button>
                            <div id="result-mercado-arbitro-reverte" class="result-box"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Gra√ßa -->
    <div id="gracaModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>üí∞ Contrato Gra√ßa</h2>
                <span class="close" onclick="closeModal('gracaModal')">&times;</span>
            </div>
            <div class="modal-body">
                <div class="tabs">
                    <button class="tab active" onclick="switchTab('graca', 'read')">üîç Leitura</button>
                    <button class="tab" onclick="switchTab('graca', 'write')">‚úèÔ∏è Escrita</button>
                </div>

                <!-- Tab de Leitura -->
                <div id="graca-read" class="tab-content active">
                    <div class="function-section">
                        <h3>Fun√ß√µes de Consulta</h3>

                        <div class="function-item">
                            <h4>Porcentagem da Gra√ßa</h4>
                            <button class="btn btn-small" onclick="graca.getPorcentagens()">Consultar</button>
                            <div id="result-graca-porcentagens" class="result-box"></div>
                        </div>

                        <div class="function-item">
                            <h4>Saldo USDT no Contrato</h4>
                            <button class="btn btn-small" onclick="graca.getSaldoUSDT()">Consultar</button>
                            <div id="result-graca-saldo" class="result-box"></div>
                        </div>

                        <div class="function-item">
                            <h4>Total Tokens Trancados</h4>
                            <button class="btn btn-small" onclick="graca.getTotalTokensTrancados()">Consultar</button>
                            <div id="result-graca-total" class="result-box"></div>
                        </div>

                        <div class="function-item">
                            <h4>Info do Stake</h4>
                            <div class="input-group">
                                <label>Endere√ßo:</label>
                                <input type="text" id="graca-stake-address" placeholder="0x...">
                            </div>
                            <button class="btn btn-small" onclick="graca.getStakeInfo()">Consultar</button>
                            <div id="result-graca-stake" class="result-box"></div>
                        </div>

                        <div class="function-item">
                            <h4>Stakers Ativos</h4>
                            <button class="btn btn-small" onclick="graca.getStakersAtivos()">Consultar</button>
                            <div id="result-graca-stakers" class="result-box"></div>
                        </div>

                        <div class="function-item">
                            <h4>Status da Vota√ß√£o</h4>
                            <button class="btn btn-small" onclick="graca.getVotacaoInfo()">Consultar</button>
                            <div id="result-graca-votacao" class="result-box"></div>
                        </div>

                        <div class="function-item">
                            <h4>Verificar se √© guardiao</h4>
                            <div class="input-group">
                                <label>Endere√ßo:</label>
                                <input type="text" id="graca-guardiao-address" placeholder="0x...">
                            </div>
                            <button class="btn btn-small" onclick="graca.isguardiao()">Verificar</button>
                            <div id="result-graca-guardiao" class="result-box"></div>
                        </div>
                    </div>
                </div>

                <!-- Tab de Escrita -->
                <div id="graca-write" class="tab-content">
                    <div class="function-section">
                        <h3>Fun√ß√µes de Escrita</h3>

                        <div class="function-item">
                            <h4>Trancar Tokens</h4>
                            <div class="input-group">
                                <label>Quantidade (com decimais):</label>
                                <input type="text" id="graca-trancar-quantidade" placeholder="1000000000000000000">
                            </div>
                            <button class="btn btn-small" onclick="graca.trancarTokens()">Trancar</button>
                            <div id="result-graca-trancar" class="result-box"></div>
                        </div>

                        <div class="function-item">
                            <h4>Destrancar Tokens</h4>
                            <button class="btn btn-small" onclick="graca.destrancarTokens()">Destrancar</button>
                            <div id="result-graca-destrancar" class="result-box"></div>
                        </div>

                        <div class="function-item">
                            <h4>Distribuir USDT</h4>
                            <button class="btn btn-small" onclick="graca.distribuir()">Distribuir</button>
                            <div id="result-graca-distribuir" class="result-box"></div>
                        </div>

                        <div class="function-item">
                            <h4>Iniciar Vota√ß√£o (Owner)</h4>
                            <div class="input-group">
                                <label>Nova Porcentagem (1-99):</label>
                                <input type="number" id="graca-iniciar-porcentagem" placeholder="35">
                            </div>
                            <button class="btn btn-small" onclick="graca.iniciarVotacao()">Iniciar</button>
                            <div id="result-graca-iniciar" class="result-box"></div>
                        </div>

                        <div class="function-item">
                            <h4>Registrar Presen√ßa</h4>
                            <button class="btn btn-small" onclick="graca.registrarPresenca()">Registrar</button>
                            <div id="result-graca-presenca" class="result-box"></div>
                        </div>

                        <div class="function-item">
                            <h4>Votar</h4>
                            <div class="input-group">
                                <label>Decis√£o:</label>
                                <select id="graca-votar-decisao">
                                    <option value="true">‚úÖ Sim</option>
                                    <option value="false">‚ùå N√£o</option>
                                </select>
                            </div>
                            <button class="btn btn-small" onclick="graca.votar()">Votar</button>
                            <div id="result-graca-votar" class="result-box"></div>
                        </div>

                        <div class="function-item">
                            <h4>Finalizar Vota√ß√£o</h4>
                            <button class="btn btn-small" onclick="graca.finalizarVotacao()">Finalizar</button>
                            <div id="result-graca-finalizar" class="result-box"></div>
                        </div>

                        <div class="function-item">
                            <h4>Alterar Carteira de Gastos (Owner)</h4>
                            <div class="input-group">
                                <label>Nova Carteira:</label>
                                <input type="text" id="graca-carteira-address" placeholder="0x...">
                            </div>
                            <button class="btn btn-small" onclick="graca.setCarteiraGastos()">Alterar</button>
                            <div id="result-graca-carteira" class="result-box"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

   {% include 'partials/dao_footer.html'%}
   <script>
        const footer = document.getElementById('votingCounters');

        if (footer) {
            footer.style.display = 'flex';
        }
   </script>
    <script src="{% static 'js/fraguismo_dao/connect.js' %}"></script>
    <script src="{% static 'js/fraguismo_dao/979.connect.v1.js' %}"></script>
    <script src="{% static 'js/fraguismo_dao/120.connect.js'%}"></script>
    <script src="{% static 'js/fraguismo_dao/416.connect.js'%}"></script>
    <script src="{% static 'js/fraguismo_dao/979.connect.js'%}"></script>
    <script src="{% static 'js/fraguismo_dao/muriloethereum.js'%}" type="application/javascript"></script>
    <script src="{% static 'js/fraguismo_dao/web3.js'%}"></script>
    <script src="{% static 'js/fraguismo_dao/initialize.js' %}"></script>
    <script src="{% static 'js/fraguismo_dao/main.js' %}"></script>
    <script src="{% static 'js/fraguismo_dao/contract-interface.js' %}"></script>
</body>

</html>